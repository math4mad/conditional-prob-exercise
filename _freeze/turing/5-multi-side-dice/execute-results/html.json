{
  "hash": "b97c00b119384c6f729ba42fb12cbe66",
  "result": {
    "markdown": "---\ntitle: \"5-multi-side-dice\"\nauthor: math4mad\ncode-fold: true\n---\n\n:::{.callout-note title=\"简介\"}\n\n  骰子有很多面的类型 @fig-1\n \n  参考 hakank-bayes-code  dice_problem\n\n  问题: 如果一个袋子内有 4面,6 面, 8 面, 12 面, 20面的骰子. \n\n  1. 如果一个人从袋子内随机取出一枚骰子, 告诉你扔出点数为 $6$, 根据点数判断是哪个骰子\n  2. 如果结果是 [ 6, 8, 7, 7, 5,4] 那么最有可能的是哪个骰子\n:::\n![多面骰子](./imgs/dice.jpeg){#fig-1 width=300}\n\n\n## 1. 通过概率路径图的计算\n### 1.1 概率路径图\n\n\n```{mermaid}\n    %%| fig-width: 6.5\n    %%| label: fig-2\n    %%| fig-cap: \"bags-flowchart\"\n    flowchart LR\n    Dice[\"Multi-Dice\"]\n    Dice==1/5==>f4(\"4-faces\")\n    Dice==1/5==>f6(\"6-faces\")\n    Dice==1/5==>f8(\"8-faces\")\n    Dice==1/5==>f12(\"12-faces\")\n    Dice==1/5==>f20(\"20-faces\")\n\n    f4==0==>f46(\"6️⃣\")\n    f6==1/6==>f66(\"6️⃣\")\n    f8==1/8==>f86(\"6️⃣\")\n    f12==1/12==>f126(\"6️⃣\")\n    f20==1/20==>f206(\"6️⃣\")\n```\n\n\n### 1.2  计算单次点数概率\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\nusing Distributions,DataFrames\n\ndice_faces=[4,6,8,12,20]\n\n\"取出每个骰子的概率数组\"\ndice_prob=fill(1//5,5)\n\ndf=DataFrame(name=String[],d4=Float64[],d6=Float64[],\n   d8=Float64[],d12=Float64[],d20=Float64[]\n)\nfunction  dp_arr(num::Int)\n  arr=Rational[]\n  for idx in eachindex(dice_faces)\n      res = num <= dice_faces[idx] ? (1//dice_faces[idx]) : 0\n      push!(arr,res)\n      \n  end \n  total=sum(arr)\n  temp= ([i//total for i in arr])|>(d->Float64.(d))|>d->round.(d,digits=2)\n  \n  return temp \nend\n\nfor idx  in 1:20\n  temp=dp_arr(idx)\n  #@info \"点数为$idx,各骰子的概率\"=>arr\n\n  push!(df,(name=\"点数:$idx\",d4=temp[1],d6=temp[2],d8=temp[3],\n     d12=temp[4],d20=temp[5]\n  ))\nend\ndf\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div><div style = \"float: left;\"><span>20×6 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">name</th><th style = \"text-align: left;\">d4</th><th style = \"text-align: left;\">d6</th><th style = \"text-align: left;\">d8</th><th style = \"text-align: left;\">d12</th><th style = \"text-align: left;\">d20</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"String\" style = \"text-align: left;\">String</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: left;\">点数:1</td><td style = \"text-align: right;\">0.37</td><td style = \"text-align: right;\">0.25</td><td style = \"text-align: right;\">0.19</td><td style = \"text-align: right;\">0.12</td><td style = \"text-align: right;\">0.07</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: left;\">点数:2</td><td style = \"text-align: right;\">0.37</td><td style = \"text-align: right;\">0.25</td><td style = \"text-align: right;\">0.19</td><td style = \"text-align: right;\">0.12</td><td style = \"text-align: right;\">0.07</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: left;\">点数:3</td><td style = \"text-align: right;\">0.37</td><td style = \"text-align: right;\">0.25</td><td style = \"text-align: right;\">0.19</td><td style = \"text-align: right;\">0.12</td><td style = \"text-align: right;\">0.07</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: left;\">点数:4</td><td style = \"text-align: right;\">0.37</td><td style = \"text-align: right;\">0.25</td><td style = \"text-align: right;\">0.19</td><td style = \"text-align: right;\">0.12</td><td style = \"text-align: right;\">0.07</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: left;\">点数:5</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.39</td><td style = \"text-align: right;\">0.29</td><td style = \"text-align: right;\">0.2</td><td style = \"text-align: right;\">0.12</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: left;\">点数:6</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.39</td><td style = \"text-align: right;\">0.29</td><td style = \"text-align: right;\">0.2</td><td style = \"text-align: right;\">0.12</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: left;\">点数:7</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.48</td><td style = \"text-align: right;\">0.32</td><td style = \"text-align: right;\">0.19</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: left;\">点数:8</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.48</td><td style = \"text-align: right;\">0.32</td><td style = \"text-align: right;\">0.19</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: left;\">点数:9</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.62</td><td style = \"text-align: right;\">0.38</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: left;\">点数:10</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.62</td><td style = \"text-align: right;\">0.38</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">11</td><td style = \"text-align: left;\">点数:11</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.62</td><td style = \"text-align: right;\">0.38</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">12</td><td style = \"text-align: left;\">点数:12</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.62</td><td style = \"text-align: right;\">0.38</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">13</td><td style = \"text-align: left;\">点数:13</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">14</td><td style = \"text-align: left;\">点数:14</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">15</td><td style = \"text-align: left;\">点数:15</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">16</td><td style = \"text-align: left;\">点数:16</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">17</td><td style = \"text-align: left;\">点数:17</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">18</td><td style = \"text-align: left;\">点数:18</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">19</td><td style = \"text-align: left;\">点数:19</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">20</td><td style = \"text-align: left;\">点数:20</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.0</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n### 1.2  计算多次抛掷概率\n\n> 例:当 结果为[6, 6, 8, 7, 7, 5, 4] 时各骰子的概率\n\n::: {.cell execution_count=2}\n``` {.julia .cell-code}\n\"dice 概率 数组 2\"\nfunction  dp_arr(nums::Array{Int})\n\n  arr=Rational[]\n  for idx in eachindex(dice_faces)\n      res = mapreduce(x-> x<= dice_faces[idx] ? (1//dice_faces[idx]) : 0, *, nums)\n      \n      push!(arr,res)\n      \n  end \n  \n  total=sum(arr)\n  return ([i//total for i in arr])|>(d->Float64.(d))|>d->round.(d,digits=2)\n  \nend\n\nres=[[6, 6],[6, 6, 8],[6, 6, 8, 7],[6, 6, 8, 7, 7],[6, 6, 8, 7, 7, 5],\n     [6, 6, 8, 7, 7, 5, 4], [6, 6, 8, 7, 7, 5, 4, 11]]\n\n#res=dp_arr2([6, 6, 8, 7, 7, 5, 4])\n#= res-dp_arr2([6, 6, 8, 7])\nDict(\"dice-$(dice_faces[idx])\" =>res[idx]  for  idx in eachindex(dice_faces)) =#\n\ndf2=DataFrame(name=String[],d4=Float64[],d6=Float64[],\n   d8=Float64[],d12=Float64[],d20=Float64[]\n)\n\nfor  r in res\n\n arr=prob_res=dp_arr(r)\n#  arr=Dict(\"$(dice_faces[idx])\"=>prob_res[idx]  for  idx in eachindex(dice_faces)) \n #arr=[prob_res[idx]  for  idx in eachindex(dice_faces)]\n #@info  \"$r \"=>arr\n push!(df2,(name=\"$(r)\",d4=arr[1],d6=arr[2],d8=arr[3],d12=arr[4],d20=arr[5]))\nend\n\ndf2\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div><div style = \"float: left;\"><span>7×6 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">name</th><th style = \"text-align: left;\">d4</th><th style = \"text-align: left;\">d6</th><th style = \"text-align: left;\">d8</th><th style = \"text-align: left;\">d12</th><th style = \"text-align: left;\">d20</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"String\" style = \"text-align: left;\">String</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: left;\">[6, 6]</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.53</td><td style = \"text-align: right;\">0.3</td><td style = \"text-align: right;\">0.13</td><td style = \"text-align: right;\">0.05</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: left;\">[6, 6, 8]</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.74</td><td style = \"text-align: right;\">0.22</td><td style = \"text-align: right;\">0.05</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: left;\">[6, 6, 8, 7]</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.82</td><td style = \"text-align: right;\">0.16</td><td style = \"text-align: right;\">0.02</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: left;\">[6, 6, 8, 7, 7]</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.88</td><td style = \"text-align: right;\">0.12</td><td style = \"text-align: right;\">0.01</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: left;\">[6, 6, 8, 7, 7, 5]</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.92</td><td style = \"text-align: right;\">0.08</td><td style = \"text-align: right;\">0.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: left;\">[6, 6, 8, 7, 7, 5, 4]</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.94</td><td style = \"text-align: right;\">0.06</td><td style = \"text-align: right;\">0.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: left;\">[6, 6, 8, 7, 7, 5, 4, 11]</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.98</td><td style = \"text-align: right;\">0.02</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "5-multi-side-dice_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}